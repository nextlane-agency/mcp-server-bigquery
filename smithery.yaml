startCommand:
  type: stdio
  configSchema:
    type: object
    required:
      - project
      - location
    properties:
      project:
        type: string
        description: The GCP project ID.
      location:
        type: string
        description: The GCP location (e.g., europe-west9).
      datasets:
        type: string
        description: Comma-separated BigQuery datasets (e.g. dataset1,dataset2). Optional.
    exampleConfig:
      project: "YOUR_PROJECT_ID"
      location: "europe-west9"
      datasets: ""
  commandFunction: |-
    (config) => {
      const datasets = (config.datasets || "")
        .split(",")
        .map(s => s.trim())
        .filter(Boolean);

      const args = [
        "--project", config.project,
        "--location", config.location,
        ...datasets.flatMap(d => ["--dataset", d]),
      ];

      return { command: "mcp-server-bigquery", args };
    }
